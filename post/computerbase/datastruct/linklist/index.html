<!DOCTYPE html>

<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="author" content="fatedier">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="基础数据结构包含
双向链表
package main import ( &quot;errors&quot; &quot;fmt&quot; ) type Node struct { id int name string next *Node prev *Node } type CircleLink struct { head *Node tail *Node } func (circleLink *CircleLink) orderInsert(node *Node) { // 按Node.id从小到大的顺序，插入链表中 curNode := circleLink.head if curNode.id == 0 { // 第一次插入元素的空链表 circleLink.head = node circleLink.tail = node } else { // 如果node.id比队首id小，则队首让位后移，要保证队首最小。因为取值比较的时候， 是取curNode.next节点与node进行比较，如果满足大小顺序， // 则将node插入curNode和curNode.next之间 if curNode.id &gt; node.id { node.next = curNode curNode.">
<meta property="og:url" content="https://kingjcy.github.io/"><meta property="og:type" content="article">
<meta property="og:title" content="Linklist - kingjcy blog"><meta property="og:site_name" content="kingjcy blog">

<title>
    
    Linklist
    
</title>

<link rel="stylesheet" href="/onlyone/onlyone.css">
<link rel="shortcut icon" href="/assets/favicon.ico">
<script src="/onlyone/onlyone.js"></script>
<link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">
</head>
<body>


<div class="container">
    <header class="nav">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">kingjcy blog</a>
                </div>

                <div class="collapse navbar-collapse" id="navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/categories/技术文章/">技术文章</a></li>
                        <li><a href="/categories/读书笔记/">读书笔记</a></li>
                        <li><a href="/categories/人生感悟/">人生感悟</a></li>
                        <li><a href="/tags/">分类</a></li>
                        <li><a href="/about/">关于我</a></li>
                        <li>
                            <form method="get" style="padding: 8px" action="https://www.google.com/search" target="_blank">
                                <input type="hidden" name="sitesearch" value="kingjcy.github.io"/>
                                <input type="text" class="form-control" name="q" placeholder="Press enter to search">
                            </form>
                        </li>
                    </ul>

                </div>
            </div>
        </nav>
    </header>


<div class="row">
    <div class="col-md-8">
        <article class="post single">

            <header>
                <div class="post-date">
                    2019年10月11日 
                </div>
                <h1 class="post-title">Linklist</h1>
            </header>

            <div class="post-content">
                <p>基础数据结构包含</p>

<p>双向链表</p>

<pre><code>package main

import (
    &quot;errors&quot;
    &quot;fmt&quot;
)

type Node struct {
    id   int
    name string
    next *Node
    prev *Node
}

type CircleLink struct {
    head *Node
    tail *Node
}

func (circleLink *CircleLink) orderInsert(node *Node) {
    // 按Node.id从小到大的顺序，插入链表中
    curNode := circleLink.head
    if curNode.id == 0 {
        // 第一次插入元素的空链表
        circleLink.head = node
        circleLink.tail = node
    } else {
        // 如果node.id比队首id小，则队首让位后移，要保证队首最小。因为取值比较的时候， 是取curNode.next节点与node进行比较，如果满足大小顺序，
        // 则将node插入curNode和curNode.next之间
        if curNode.id &gt; node.id {
            node.next = curNode
            curNode.prev = node
            circleLink.head = node
        } else {
            // 如果node.id不比队首id小，则往后取一位，用后一位与node比较，匹配则插入当前位与后一位中间
            for {
                if curNode.next == nil {
                    // 循环到最后一位都没有插入成功，说明node.id比现有链表中的所有node的id都大，则node成为新的队尾
                    curNode.next = node
                    node.prev = curNode
                    circleLink.tail = node
                    break
                }
                if curNode.next.id &gt; node.id {
                    node.next = curNode.next
                    node.prev = curNode
                    curNode.next.prev = node
                    curNode.next = node
                    break
                }
                curNode = curNode.next
            }
        }
    }
}

func (circleLink *CircleLink) pop(id int) (node *Node, err error) {
    // 弹出链表中指定id的node.这次从链表尾部往首部循环
    curNode := circleLink.tail
    if curNode.id == id {
        // 要取的是队尾
        circleLink.tail = circleLink.tail.prev
        return curNode, nil
    }
    flag := false // 是否查找到的标志
    for {
        if curNode.prev == nil {
            // 已经从队尾达到队首,全部都没命中
            break
        }
        if curNode.id == id {
            flag = true
            selectNode := curNode
            if curNode == circleLink.head {
                // 如果命中的节点正好是队首
                if circleLink.head.next != nil {
                    // 如果队首后面还有节点，则第二个节点置为新的首节点，且第二个节点的prev指向置为nil，这样原head没有被引用，内存会释放出来
                    circleLink.head.next.prev = nil
                    circleLink.head = circleLink.head.next
                } else {
                    // 如果队首之后没有节点了，那么直接首位都置空
                    circleLink.head = nil
                    circleLink.tail = nil
                }
            } else {
                // 命中的节点在队中间,则取出命中的节点，并维护好其前后指向关系
                curNode.prev.next = curNode.next
                curNode.next.prev = curNode.prev
            }
            return selectNode, nil
        }
        curNode = curNode.prev
    }
    if !flag {
        // 如果循环结束还没有查找到，输出信息
        return nil, errors.New(&quot;node not found&quot;)
    }
    return
}

func (circleLink *CircleLink) getLength() (number int) {
    curNode := circleLink.tail
    if circleLink.tail.id == 0 || circleLink.tail == nil {
        // 空链表
        return
    } else {
        for {
            number += 1
            curNode = curNode.prev
            if curNode == nil {
                break
            }
        }
    }
    fmt.Println(&quot;current link length:&quot;, number)
    return number
}

func (circleLink *CircleLink) list() {
    if circleLink.tail == nil || circleLink.tail.id == 0 {
        fmt.Println(&quot;link is empty&quot;)
    } else {
        curNode := circleLink.tail
        var nodes []*Node
        for {
            if curNode == nil {
                break
            }
            //fmt.Print(&quot;&lt;==&quot;, *curNode)
            // 从尾部到首部的循环，为了展示链接效果，将节点先加入一个slice中，稍后从slice的后面开始循环展示数据.此时slice是从尾部到首部排序的
            nodes = append(nodes, curNode)
            curNode = curNode.prev
        }
        for i := 0; i &lt; len(nodes); i++ {
            index := len(nodes) - i - 1 // 颠倒一下顺序，现在slice中的顺序和链表顺序恰好是相反的，为了打印的效果，让前面的节点先输出
            fmt.Print(&quot;&lt;==&gt;&quot;, nodes[index])
        }
    }

    fmt.Println()

}

func main() {
    // 约定空链表的header初始id为0，后面加入的实例id必须大于0
    var originalHead = Node{
        id: 0,
    }
    var s = CircleLink{
        head: &amp;originalHead,
    }
    var node1 = Node{
        id:   1,
        name: &quot;001&quot;,
    }
    var node2 = Node{
        id:   2,
        name: &quot;002&quot;,
    }
    var node3 = Node{
        id:   3,
        name: &quot;003&quot;,
    }
    var node4 = Node{
        id:   4,
        name: &quot;004&quot;,
    }
    var node5 = Node{
        id:   5,
        name: &quot;005&quot;,
    }

    s.orderInsert(&amp;node4)
    s.list()
    s.orderInsert(&amp;node2)
    s.list()
    s.orderInsert(&amp;node3)
    s.list()
    s.orderInsert(&amp;node5)
    s.list()
    s.orderInsert(&amp;node1)
    s.list()
    s.getLength()
    popNode, err := s.pop(3)
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(&quot;pop node successfully:&quot;, *popNode)
    s.list()

    /*
        output:
            &lt;==&amp;{4 004 &lt;nil&gt; &lt;nil&gt;}
            &lt;==&amp;{2 002 0xc0000761e0 &lt;nil&gt;}&lt;==&amp;{4 004 &lt;nil&gt; 0xc000076180}
            &lt;==&amp;{2 002 0xc0000761b0 &lt;nil&gt;}&lt;==&amp;{3 003 0xc0000761e0 0xc000076180}&lt;==&amp;{4 004 &lt;nil&gt; 0xc0000761b0}
            &lt;==&amp;{2 002 0xc0000761b0 &lt;nil&gt;}&lt;==&amp;{3 003 0xc0000761e0 0xc000076180}&lt;==&amp;{4 004 0xc000076210 0xc0000761b0}&lt;==&amp;{5 005 &lt;nil&gt; 0xc0000761e0}
            &lt;==&amp;{1 001 0xc000076180 &lt;nil&gt;}&lt;==&amp;{2 002 0xc0000761b0 0xc000076150}&lt;==&amp;{3 003 0xc0000761e0 0xc000076180}&lt;==&amp;{4 004 0xc000076210 0xc0000761b0}&lt;==&amp;{5 005 &lt;nil&gt; 0xc0000761e0}
            current link length: 5
            pop node successfully: {3 003 0xc0000761e0 0xc000076180}
            &lt;==&amp;{1 001 0xc000076180 &lt;nil&gt;}&lt;==&amp;{2 002 0xc0000761e0 0xc000076150}&lt;==&amp;{4 004 0xc000076210 0xc000076180}&lt;==&amp;{5 005 &lt;nil&gt; 0xc0000761e0}
    */
}
</code></pre>

            </div>
            
            <div style="border: 1px dashed #e0e0e0; margin-bottom: 15px; padding: 10px 10px 10px 10px; background-color: #fffeee; background-repeat: no-repeat; background-attachment: scroll; background-position: 1% 50%; -moz-background-size: auto auto; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">
                <div>
                    <p style="margin-top:0px;">作者：<a target="_blank" href="http://blog.fatedier.com/">kingjcy</a>
                    <br />本文出处：<a target="_blank" href="https://kingjcy.github.io/post/computerbase/datastruct/linklist/">https://kingjcy.github.io/post/computerbase/datastruct/linklist/</a>
                    <br />
                    文章版权归本人所有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文链接，否则保留追究法律责任的权利。 </p>
                </div>
            </div>

            <aside>
                
                <ul class="list-inline post-tags">
                    
                    <li>
                        <a href="/tags//">
                            <i class="fa fa-tags"></i>
                            
                        </a>
                    </li>
                    
                </ul>

                
                
                <h4 id="real-rels">相关文章</h4>
                <ul class="post-rels" id="real-rels"><li id="li-rels"><a href="/post/golang/go-unsafe/">Go Unsafe</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-text/">Go Text</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-plugin/">Go Plugin</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-mine/">Go Mine</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-internal/">Go Internal</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-index/">Go Index</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-image/">Go Image</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-html/">Go Html</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-hash/">Go Hash</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-go/">Go Go</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li></ul>
            </aside>
                
            
            <footer>
                <nav>
                    <ul class="pager">

                        
                        <li class="previous"><a href="/post/golang/go-container-heap/"><span aria-hidden="true">&larr;</span> Prev</a></li>
                        

                        <li><a href="/post/">All Posts</a></li>

                        
                        <li class="next"><a href="/post/web/language/node/">Next <span aria-hidden="true">&rarr;</span></a></li>
                        

                    </ul>
                </nav>
            </footer>

        </article>
    </div>
    <div class="col-md-4">
        
<aside>
        <div class="toc panel panel-default hidden-xs hidden-sm affix-top" data-spy="affix" data-offset-top="125" data-offset-bottom="300">
            <div class="panel-heading">
                <h2 class="panel-title">Catalog</h2>
            </div>

            
        </div>
</aside>

    </div>
</div>

</div>
<hr>

<footer class="container copy">
    <p>&copy; 2020  kingjcy blog </p>
	<p>Powered by <a href="https://gohugo.io" target="_blank">Hugo</a></p>
</footer>

<script>hljs.initHighlightingOnLoad();</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ace3ec99de96c4080ead1eb8d52db3b3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92600390-2', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>


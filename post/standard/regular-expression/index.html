<!DOCTYPE html>

<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="author" content="fatedier">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="正则表达式就是记录文本规则的代码。">
<meta property="og:url" content="https://kingjcy.github.io/"><meta property="og:type" content="article">
<meta property="og:title" content="Regular Expression - kingjcy blog"><meta property="og:site_name" content="kingjcy blog">

<title>
    
    Regular Expression
    
</title>

<link rel="stylesheet" href="/onlyone/onlyone.css">
<link rel="shortcut icon" href="/assets/favicon.ico">
<script src="/onlyone/onlyone.js"></script>
<link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">
</head>
<body>


<div class="container">
    <header class="nav">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">kingjcy blog</a>
                </div>

                <div class="collapse navbar-collapse" id="navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/categories/技术文章/">技术文章</a></li>
                        <li><a href="/categories/读书笔记/">读书笔记</a></li>
                        <li><a href="/categories/人生感悟/">人生感悟</a></li>
                        <li><a href="/tags/">分类</a></li>
                        <li><a href="/about/">关于我</a></li>
                        <li>
                            <form method="get" style="padding: 8px" action="https://www.google.com/search" target="_blank">
                                <input type="hidden" name="sitesearch" value="kingjcy.github.io"/>
                                <input type="text" class="form-control" name="q" placeholder="Press enter to search">
                            </form>
                        </li>
                    </ul>

                </div>
            </div>
        </nav>
    </header>


<div class="row">
    <div class="col-md-8">
        <article class="post single">

            <header>
                <div class="post-date">
                    2015年02月07日 
                </div>
                <h1 class="post-title">Regular Expression</h1>
            </header>

            <div class="post-content">
                <p>正则表达式就是记录文本规则的代码。</p>

<h2 id="元字符">元字符</h2>

<p>.   除换行符以外的任何字符</p>

<p>\w  匹配字符，下划线，数字，汉字</p>

<p>\s  任意空白字符</p>

<p>\d  任意数字</p>

<p>\b  分界符，单词的开始与结束</p>

<p>^   字符串的开始</p>

<p>$   字符串的结束</p>

<p>!   不是什么</p>

<p>下面来看看更多的例子：</p>

<p>\ba\w<em>\b          以字母a开头的单词——先是某个单词开始处(\b)，然后是字母a,然后是任意数量的字母或数字(\w</em>)，最后是单词结束处(\b)。</p>

<p>\d+     1个或更多连续的数字。这里的+是和*类似的元字符，不同的是*匹配重复任意次(可能是0次)，而+则匹配重复1次或更多次。</p>

<p>\b\w{6}\b     刚好6个字符的单词。</p>

<p>^\d{5,12}$     一个网站如果要求你填写的QQ号必须为5位到12位数字,这里的{5,12}和前面介绍过的{2}是类似的，只不过{2}匹配只能不多不少重复2次，{5,12}则是重复的次数不能少于5次，不能多于12次，否则都不匹配。</p>

<h2 id="转义">转义</h2>

<p>使用“\”进行转义字符的使用，正常需要转义的是.*\等，在python中使用r&rdquo;&ldquo;来解决转义字符中存在的问题</p>

<p>deerchao.net   匹配     deerchao.net</p>

<p>C:\Windows     匹配     C:\Windows。</p>

<h2 id="重复">重复</h2>

<p>“*” 重复0或者无数次</p>

<p>“+” 重复一次或者无数次</p>

<p>“?” 重复0或1次</p>

<p>“{n}”   重复n次</p>

<p>“{n,}”  重复n次到无数次</p>

<p>“{n,m}” 重复n次到m次</p>

<p>[&hellip;]   或者关系</p>

<p>Windows\d+匹配Windows后面跟1个或更多数字</p>

<p>^\w+匹配一行的第一个单词(或整个字符串的第一个单词，具体匹配哪个意思得看选项设置)</p>

<p>[aeiou]就匹配任何一个英文元音字母，[.?!]匹配标点符号(.或?或!)</p>

<p>[0-9]代表的含意与\d就是完全一致的：一位数字</p>

<h2 id="分支条件">分支条件</h2>

<p>使用“|”来作为两个条件使用，不符合第一个再向下匹配，条件是从左到右的测试每一个条件。</p>

<p>0\d{2}-\d{8}|0\d{3}-\d{7}这个表达式能匹配两种以连字号分隔的电话号码：一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(0376-2233445)。</p>

<p>(0\d{2})[- ]?\d{8}|0\d{2}[- ]?\d{8}这个表达式匹配3位区号的电话号码，其中区号可以用小括号括起来，也可以不用，区号与本地号间可以用连字号或空格间隔，也可以没有间隔。你可以试试用分枝条件把这个表达式扩展成也支持4位区号的。</p>

<p>\d{5}-\d{4}|\d{5}这个表达式用于匹配美国的邮政编码。美国邮编的规则是5位数字，或者用连字号间隔的9位数字。之所以要给出这个例子是因为它能说明一个问题：使用分枝条件时，要注意各个条件的顺序。如果你把它改成\d{5}|\d{5}-\d{4}的话，那么就只会匹配5位的邮编(以及9位邮编的前5位)。原因是匹配分枝条件时，将会从左到右地测试每个条件，如果满足了某个分枝的话，就不会去再管其它的条件了</p>

<h2 id="分组">分组</h2>

<p>使用“()”来表示分组，第一组用编号1来表示，以此类推，编号0表示全部字符串，这个是python中的规则。</p>

<p>(\d{1,3}.){3}\d{1,3}是一个简单的IP地址匹配表达式。要理解这个表达式，请按下列顺序分析它：\d{1,3}匹配1到3位的数字，(\d{1,3}.){3}匹配三位数字加上一个英文句号(这个整体也就是这个分组)重复3次，最后再加上一个一到三位的数字(\d{1,3})。</p>

<p>IP地址中每个数字都不能大于255. 经常有人问我, 01.02.03.04 这样前面带有0的数字, 是不是正确的IP地址呢? 答案是: 是的, IP 地址里的数字可以包含有前导 0 (leading zeroes).
不幸的是，它也将匹配256.300.888.999这种不可能存在的IP地址。如果能使用算术比较的话，或许能简单地解决这个问题，但是正则表达式中并不提供关于数学的任何功能，所以只能使用冗长的分组，选择，字符类来描述一个正确的IP地址：((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)。</p>

<p>这个还可以使用于后向引用，每个括号就是一个编号，重左向右，依次1，2，3，然后后面就可以直接使用编号</p>

<p>(exp)       匹配exp,并捕获文本到自动命名的组里</p>

<p>(?&lt;name&gt;exp)       匹配exp,并捕获文本到名称为name的组里，也可以写成(?&lsquo;name&rsquo;exp)</p>

<p>\b(\w+)\b\s+\1\b可以用来匹配重复的单词，像go go, 或者kitty kitty。这个表达式首先是一个单词，也就是单词开始处和结束处之间的多于一个的字母或数字(\b(\w+)\b)，这个单词会被捕获到编号为1的分组中，然后是1个或几个空白符(\s+)，最后是分组1中捕获的内容（也就是前面匹配的那个单词）(\1)。</p>

<p>可以指定括号中子表达式的组名。要指定一个子表达式的组名，请使用这样的语法：(?<Word>\w+)(或者把尖括号换成&rsquo;也行：(?&lsquo;Word&rsquo;\w+)),这样就把\w+的组名指定为Word了。要反向引用这个分组捕获的内容，你可以使用\k<Word></p>

<p>所以上一个例子也可以写成这样：\b(?<Word>\w+)\b\s+\k<Word>\b。</p>

<p>小括号还有很多特定的作用</p>

<p>(?:exp) 匹配exp,不捕获匹配的文本，也不给此分组分配组号</p>

<p>(?=exp) 匹配exp前面的位置</p>

<p>(?&lt;=exp)匹配exp后面的位置</p>

<p>(?!exp) 匹配后面跟的不是exp的位置</p>

<pre><code>(?&lt;!exp)    匹配前面不是exp的位置
</code></pre>

<p>零宽断言</p>

<p>(?=exp)也叫零宽度正预测先行断言，它断言自身出现的位置的后面能匹配表达式exp。比如\b\w+(?=ing\b)，匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找I&rsquo;m singing while you&rsquo;re dancing.时，它会匹配sing和danc。</p>

<p>(?&lt;=exp)也叫零宽度正回顾后发断言，它断言自身出现的位置的前面能匹配表达式exp。比如(?&lt;=\bre)\w+\b会匹配以re开头的单词的后半部分(除了re以外的部分)，例如在查找reading a book时，它匹配ading。</p>

<p>零宽度负预测先行断言(?!exp)，断言此位置的后面不能匹配表达式exp。例如：\d{3}(?!\d)匹配三位数字，而且这三位数字的后面不能是数字；\b((?!abc)\w)+\b匹配不包含连续字符串abc的单词。</p>

<p>同理，我们可以用</p>

<pre><code>(?&lt;!exp)
</code></pre>

<p>,零宽度负回顾后发断言来断言此位置的前面不能匹配表达式exp：</p>

<pre><code>(?&lt;![a-z])\d{7}匹配前面不是小写字母的七位数字。
</code></pre>

<p>实例</p>

<p>正则表达式匹配括号中的字符,不包括括号</p>

<pre><code>(?&lt;=\()\S+(?=\))
</code></pre>

<p>(?&lt;=exp)是以exp开头的字符串, 但不包含本身.</p>

<p>(?=exp)就匹配惟exp结尾的字符串, 但不包含本身.</p>

<p>(?&lt;=()    也就是以括号开头, 但不包含括号.</p>

<p>(?=)) 就是以括号结尾</p>

<p>\S 匹配任何非空白字符。等价于[^ \f\n\r\t\v]。</p>

<p>+表示至少有一个字符.</p>

<p>(?&lt;=()\S+(?=))  就是匹配以 (开头, )结尾的括号里面最少有一个非空白字符的串, 但不包括开头的(和结尾的)</p>

<h2 id="反义">反义</h2>

<p>\W  匹配任意不是字母，数字，下划线，汉字的字符</p>

<p>\S  匹配任意不是空白符的字符</p>

<p>\D  匹配任意非数字的字符</p>

<p>\B  匹配不是单词开头或结束的位置</p>

<p>[^x]    匹配除了x以外的任意字符</p>

<p>[^aeiou]    匹配除了aeiou这几个字母以外的任意字符</p>

<p>例子：\S+匹配不包含空白符的字符串。</p>

<p><a[^>]+&gt;匹配用尖括号括起来的以a开头的字符串。</p>

<h2 id="注释">注释</h2>

<p>(?#comment) 这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读</p>

<h2 id="贪婪与懒惰">贪婪与懒惰</h2>

<p>*?  重复任意次，但尽可能少重复</p>

<p>+?  重复1次或更多次，但尽可能少重复</p>

<p>??  重复0次或1次，但尽可能少重复</p>

<p>{n,m}?  重复n到m次，但尽可能少重复</p>

<p>{n,}?   重复n次以上，但尽可能少重复</p>

<p>举例</p>

<p>a.*b，它将会匹配最长的以a开始，以b结束的字符串。如果用它来搜索aabab的话，它会匹配整个字符串aabab。这被称为贪婪匹配。</p>

<p>a.*?b匹配最短的，以a开始，以b结束的字符串。如果把它应用于aabab的话，它会匹配aab（第一到第三个字符）和ab（第四到第五个字符）。</p>

<h1 id="处理选项">处理选项</h1>

<p>IgnoreCase(忽略大小写)       匹配时不区分大小写。
Multiline(多行模式)     更改^和$的含义，使它们分别在任意一行的行首和行尾匹配，而不仅仅在整个字符串的开头和结尾匹配。(在此模式下,$的精确含意是:匹配\n之前的位置以及字符串结束前的位置.)
Singleline(单行模式)        更改.的含义，使它与每一个字符匹配（包括换行符\n）。
IgnorePatternWhitespace(忽略空白)   忽略表达式中的非转义空白并启用由#标记的注释。
ExplicitCapture(显式捕获)       仅捕获已被显式命名的组。</p>

<p>以上是正则表达式基础，可以详细去看一下go的基本使用，下面备注了python的使用可以以后使用时候参考</p>

<h2 id="python-re模块">Python Re模块</h2>

<p>#返回pattern对象</p>

<p>re.compile(string[,flag])</p>

<p>#以下为匹配所用函数</p>

<p>re.match(pattern, string[, flags])</p>

<p>re.search(pattern, string[, flags])</p>

<p>re.split(pattern, string[, maxsplit])</p>

<p>re.findall(pattern, string[, flags])</p>

<p>re.finditer(pattern, string[, flags])</p>

<p>re.sub(pattern, repl, string[, count])</p>

<p>re.subn(pattern, repl, string[, count])</p>

<p>flag的值可能有</p>

<p>• re.I(全拼：IGNORECASE): 忽略大小写（括号内是完整写法，下同）</p>

<p>• re.M(全拼：MULTILINE): 多行模式，改变&rsquo;^&lsquo;和&rsquo;$&lsquo;的行为（参见上图）</p>

<p>• re.S(全拼：DOTALL): 点任意匹配模式，改变&rsquo;.&lsquo;的行为</p>

<p>• re.L(全拼：LOCALE): 使预定字符类 \w \W \b \B \s \S 取决于当前区域设定</p>

<p>• re.U(全拼：UNICODE): 使预定字符类 \w \W \b \B \s \S \d \D 取决于unicode定义的字符属性</p>

<p>• re.X(全拼：VERBOSE): 详细模式。这个模式下正则表达式可以是多行，忽略空白字符，并可以加入注释。</p>
            </div>
            
            <div style="border: 1px dashed #e0e0e0; margin-bottom: 15px; padding: 10px 10px 10px 10px; background-color: #fffeee; background-repeat: no-repeat; background-attachment: scroll; background-position: 1% 50%; -moz-background-size: auto auto; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">
                <div>
                    <p style="margin-top:0px;">作者：<a target="_blank" href="http://blog.fatedier.com/">kingjcy</a>
                    <br />本文出处：<a target="_blank" href="https://kingjcy.github.io/post/standard/regular-expression/">https://kingjcy.github.io/post/standard/regular-expression/</a>
                    <br />
                    文章版权归本人所有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文链接，否则保留追究法律责任的权利。 </p>
                </div>
            </div>

            <aside>
                
                <ul class="list-inline post-tags">
                    
                    <li>
                        <a href="/tags//">
                            <i class="fa fa-tags"></i>
                            
                        </a>
                    </li>
                    
                </ul>

                
                
                <h4 id="real-rels">相关文章</h4>
                <ul class="post-rels" id="real-rels"><li id="li-rels"><a href="/post/golang/go-unsafe/">Go Unsafe</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-text/">Go Text</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-plugin/">Go Plugin</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-mine/">Go Mine</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-internal/">Go Internal</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-index/">Go Index</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-image/">Go Image</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-html/">Go Html</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-hash/">Go Hash</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li><li id="li-rels"><a href="/post/golang/go-go/">Go Go</a>&nbsp;&nbsp;<span class="post-date" style="font-size:14px">&nbsp;(2019年12月25日)</span></li></ul>
            </aside>
                
            
            <footer>
                <nav>
                    <ul class="pager">

                        
                        <li class="previous"><a href="/post/linux/tool/shell/"><span aria-hidden="true">&larr;</span> Prev</a></li>
                        

                        <li><a href="/post/">All Posts</a></li>

                        
                        <li class="next"><a href="/post/tool/markdown/">Next <span aria-hidden="true">&rarr;</span></a></li>
                        

                    </ul>
                </nav>
            </footer>

        </article>
    </div>
    <div class="col-md-4">
        
<aside>
        <div class="toc panel panel-default hidden-xs hidden-sm affix-top" data-spy="affix" data-offset-top="125" data-offset-bottom="300">
            <div class="panel-heading">
                <h2 class="panel-title">Catalog</h2>
            </div>

            <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#元字符">元字符</a></li>
<li><a href="#转义">转义</a></li>
<li><a href="#重复">重复</a></li>
<li><a href="#分支条件">分支条件</a></li>
<li><a href="#分组">分组</a></li>
<li><a href="#反义">反义</a></li>
<li><a href="#注释">注释</a></li>
<li><a href="#贪婪与懒惰">贪婪与懒惰</a></li>
</ul></li>
<li><a href="#处理选项">处理选项</a>
<ul>
<li><a href="#python-re模块">Python Re模块</a></li>
</ul></li>
</ul>
</nav>
        </div>
</aside>

    </div>
</div>

</div>
<hr>

<footer class="container copy">
    <p>&copy; 2020  kingjcy blog </p>
	<p>Powered by <a href="https://gohugo.io" target="_blank">Hugo</a></p>
</footer>

<script>hljs.initHighlightingOnLoad();</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ace3ec99de96c4080ead1eb8d52db3b3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92600390-2', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>


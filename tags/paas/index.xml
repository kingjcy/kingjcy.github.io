<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Paas on kingjcy blog</title>
    <link>https://kingjcy.github.io/tags/paas/</link>
    <description>Recent content in Paas on kingjcy blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <copyright>Copyright (c) 2020. All rights reserved.</copyright>
    <lastBuildDate>Wed, 02 Jan 2019 19:51:38 +0800</lastBuildDate>
    
	<atom:link href="https://kingjcy.github.io/tags/paas/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>云计算系列---- PaaS</title>
      <link>https://kingjcy.github.io/post/cloud/paas/paas/</link>
      <pubDate>Wed, 02 Jan 2019 19:51:38 +0800</pubDate>
      
      <guid>https://kingjcy.github.io/post/cloud/paas/paas/</guid>
      <description>PaaS paas就是一个为应用提供自动化（部署，运维）的平台。
paas的定位 平台即服务（PaaS）与基础设施即服务（IaaS）是不同的，PaaS并不是IaaS的一个扩展特性，对于基础设施即服务（IaaS）来说，基础单元就是资源，这里的资源是指服务器，磁盘，网络等，IaaS所做的一切就是按照需要提供这些资源。例如，亚马逊（amazon）的EC2服务，所有的工具都以资源为中心，所有的文档都是关于资源的，所有的开发都是专注于资源，同时人们也因为需要这些资源而使用它。
对于平台即服务（PaaS）来说，基础单元就是应用。那么什么是应用？就是一个系统，就是代码以及所有那些在任何时候都与这些代码通信的服务。这不仅仅是资源，事实上，一个应用是由很多单独的资源绑定在一起组成的。将所有这些资源连接在一起所需要付出的工作量通常被低估了。从一个单一的运行Apache和Mysql的服务器转移到一个拥有单独的负载均衡服务器，缓存服务器，应用服务器，数据库服务器以及冗余的失效恢复的系统架构需要大量的工作，包括前期投入以及后期维护。一个成熟的PaaS平台可以为用户提供上述的所有功能，在减少用户大量工作的前提下，大幅度提升用户应用的开发速度，运行稳定性，可靠性，极大的降低了用户的开发，测试及运维的成本。
利用PaaS可以做的另外一件事，就是从应用的角度来管理IaaS。通常情况下，使用者对于IaaS的资源需求实质上是来源于运行在IaaS之上的应用，如何根据应用的需求动态的使用IaaS资源又成为摆在云使用者面前的一个难题，PaaS作为SaaS与IaaS的沟通者，可以根据SaaS的需求动态的协调IaaS资源，使IaaS按需分配资源的理念变得更智能，更有实际意义。
IaaS为云使用者提供了按需分配的能力，用户可以按照自己的需求定制计算资源，存储资源，网络资源，并且利用云端的海量资源随时快速的开启资源，并在工作完成时，随时释放资源，在享受云带来的高可靠性的同时，也最大化的降低了使用成本，提升了资源利用率。
但是IaaS为云使用者带来的便利只局限在资源这个层面上，云使用者可以快速，稳定，海量的使用资源，但是一旦获取到资源后，云使用者依然要为运行在资源之上的应用搭建各种适配环境（部署），解决应用的各种依赖，安装应用要使用的各种服务，维护应用的运行生命周期。这些问题IaaS都没有解决，或者说，这些问题本质上也不是IaaS需要解决的问题，而是PaaS需要解决的问题。
综上所述
1、IaaS关注于硬件的自动化管理，目标是人与机器的解耦合，提升了效率和性能。 2、PaaS关注于应用的自动化管理，目标是应用与操作系统的解耦合，提升了弹性和控制。在应用的角度，paas可以管理iaas。  PaaS的分类 我们需要了解一下PaaS平台自身的分类。Gartner把它们分为两类
一类是应用部署和运行平台APaaS（Application Platform As a Service） 一类是集成平台IPaaS（Integration Platform As a Service）。  APaaS是一种面向IT企业和机构的云计算应用开发与部署平台。APaaS主要为应用提供运行环境和数据存储，能够将本地部署的传统应用直接部署到APaaS上。
IPaaS是用于集成和协同的PaaS平台，不仅可以支持与现有云服务间的连接性，而且可以以安全的方式提供企业应用的访问能力。IPaaS主要用于集成和构建复合应用。
大数据厂商的PaaS实际上是属于IPaaS，而容器厂商和IaaS厂商的PaaS大致为APaaS。
APaaS的一般特性
大规模分布式系统：
完全模块化的分布式系统，保证云平台可靠性； 每个模块单独存在和运行，通过消息总线进行通讯； 系统耦合度低，便于弹性动态扩展；  弹性伸缩框架：
平台自身组件支持实时横向扩展; 根据应用的负载情况，动态加载应用实例； 应用实例支持实时水平扩展；  运维自动化：
日常运维操作简化; 故障自动恢复;  应用部署简单化：
一键式应用快速部署; 支持多种应用开发框架，包括Spring、.NET、Ruby on Rails，Node.js等; 通过buildpack扩展运行不同语言应用的能力;  支持多种服务：
支持多种数据服务，包括MySQL、mongodb、PostgreSQL等; 通过service broker组件扩展多种应用服务能力，包括数据库、中间件、缓存、云存储等。  主流PaaS平台架构及对比 了解了PaaS的分类，我们再来看看PaaS的具体技术对比。由于IPaaS具有很强的业务属性，因此这里我们主要来看一下更通用的APaaS，也是目前被大家最多提起的。说到PaaS，相信很多人都会把他和容器、Docker关联起来。下面来看几张图：
  这张图很清晰的划分出了XaaS以及各种概念对应的平台。大家所熟知的容器平台在这里实际上是CaaS的一种。那么CaaS和PaaS有什么区别呢？我们接下来对比一下CaaS和PaaS里面最具代表性的两个平台：CaaS和CloudFoundry。
 Docker/CaaS
 Docker/CaaS 提供直接管理操作基础设施的性能，带来基础设施层面的灵活性。用户 通过直接操作容器可以更灵活的实现应用迁移、部署。但这个更加轻量的平台带来了用户学 习成本和使用复杂度的增加。
容器云平台的搭建只依托 Swarm/Mesos/K8s 等容器编排调度系统就可以实现，还需 要引入大量的第三方解决方案，例如日志、监控、网络等。这就意味着一定的试错成本，另 外第三方系统的成熟度发展不一，组成一套统一的云平台后进入生产环境的应用需要经过一 定周期的论证和验证。</description>
    </item>
    
    <item>
      <title>项目系列---- PaaS平台</title>
      <link>https://kingjcy.github.io/post/programe/paas/paas/</link>
      <pubDate>Tue, 18 Apr 2017 20:14:11 +0800</pubDate>
      
      <guid>https://kingjcy.github.io/post/programe/paas/paas/</guid>
      <description>主要是移动容器云平台的建设
paas版本到1.0
paas平台是一个运行管理监控容器应用的自动化平台，集成了前端门户，api网关，权限模块，资源模块，应用模块，集群模块，监控告警，能力模块这些模块，实现了应用的快速开发，测试，简单部署，监控告警等运维功能的平台，主要使用了k8s相关组件，docker，harbor等容器技术，kong api网关技术，基于rbac的权限控制技术，prometheus+grafana监控告警技术，flannel，caclio等网络技术，etcd，redis，mysql等存储技术，实现单点登录，服务发现，数据存储等。其实就是一个给产品跑的服务平台。
1.门户界面
登录&amp;ndash;首页&amp;mdash;-个人资源概览&amp;ndash;应用／系统／资源运维&amp;ndash;监控告警
具体看监控告警界面
有文件可以参考&amp;mdash;ppt
租户&amp;ndash;集群&amp;ndash;namespace&amp;ndash;应用-方法
cpu／内存／磁盘／应用／容器／镜像仓库（只有一个harbor，多个库）／审计日志（啥时干啥）／告警
cpu／内存／磁盘／应用／容器／镜像数／审计日志（啥时干啥）／告警
应用／容器／负载均衡器／审计日志（啥时干啥）／告警
cpu／内存／调用成功失败
调用的方法。qps一秒钟查询响应次数 ms响应时间
2.api网关&amp;ndash;kong，中间件
kong 0.12.1
一个网关的基本功能有：统一接入、安全防护、协议适配、流量管控、长短链接支持、容错能力。
API网关更专注于安全、流量、路由等问题
技术选型
kong tyK zuul apiaxle: Nodejs 实现的一个 API 网关。 api-umbrella: Ruby
对比了几个开源项目觉得Mashape/kong和TykTechnologies/tyk 可以选用，从star数来看空占优支持性较好，
但是微服务过渡团队更多的会使用golang作为开发语言，个人更倾向于tyk。
tyk部分功能存在收费，闭源问题。
kong 有nginx作支持更有保障，安装简单，扩展性强一点
并且选择kong的人多过tyk。
可扩展性，Kong依赖一个数据库来实现配置存储，
依赖 serf 来实现 instance 之间的通信。
任何一个节点修改了其他节点会收到通知并重新reload配置。
模块化，Kong 可以方便地增加新的插件，并且插件可以通过 Restful API 进行管理 Kong采用插件机制进行功能定制，插件集（可以是0或n个）在API请求响应循环的生命周期中被执行。插件使用Lua编写，目前已有几个基础功能：HTTP基本认证、密钥认证、CORS（ Cross-origin Resource Sharing，跨域资源共享）、TCP、UDP、文件日志、API请求限流、请求转发以及nginx监控。
数量瓶颈
水平扩展多个Kong服务器，通过前置的负载均衡配置把请求均匀地分发到各个Server，来应对大批量的网络请求。
kong 集群将使得系统通过增加更多机器，从而实现水平扩展，承接更多的请求流量。它们将共享同样的配置且使用同一个数据库。kong 集群中的的所有节点都连接同一个数据库。
你需要在 kong 集群的上一层架设一个负载均衡的代理服务器，以便请求能够平均分散转发到 kong 的各个节点上。
考虑到性能原因，当 kong 代理请求的时候，为了避免频繁的数据库连接操作，kong 将会把以下 db 内容缓存到本机内存中。这些缓存包括：API定义，用户信息，插件信息，授权认证信息等。由于这些值在本机缓存中，通过 Admin api 去更新任何一个节点本地缓存中的值，都需要传播给其他节点。</description>
    </item>
    
    <item>
      <title>项目系列---- PaaS平台</title>
      <link>https://kingjcy.github.io/post/programe/paas/snpaas/</link>
      <pubDate>Tue, 18 Apr 2017 20:14:11 +0800</pubDate>
      
      <guid>https://kingjcy.github.io/post/programe/paas/snpaas/</guid>
      <description>主要是苏宁容器云平台的建设
研发云 jenkins
基础云 java写的一个paas平台，在原来的虚拟机的paas平台上新增了一个虚拟化类型K8S。
K8s+docker
1、pod的资源分配问题？
一般生产会留有一定的配额，另外一台崩了，偏到其他机器上，没有资源就无法调度成功。正常调度成功，那就不超分，不超分就是安全的，只要超过应用分配是会被就会被killer掉。
宕机一般超过5分钟先设置成NotReady，之后才会进行漂移 默认的是大规模集群，宕机超过55%，偏移的速率会调低，你也可以通过参数来控制它不偏移
监控云 prometehtues
EFK</description>
    </item>
    
  </channel>
</rss>
<!DOCTYPE html>

<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="author" content="fatedier">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Network">
<meta property="og:url" content="https://kingjcy.github.io/"><meta property="og:title" content="Network - kingjcy blog"><meta property="og:site_name" content="kingjcy blog">

<title>
    
    Network - kingjcy blog
    
</title>

<link rel="stylesheet" href="/onlyone/onlyone.css">
<link rel="shortcut icon" href="/assets/favicon.ico">
<script src="/onlyone/onlyone.js"></script>
<link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">
</head>
<body>


<div class="container">
    <header class="nav">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">kingjcy blog</a>
                </div>

                <div class="collapse navbar-collapse" id="navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/categories/技术文章/">技术文章</a></li>
			<li><a href="/categories/读书笔记/">读书笔记</a></li>
                        <li><a href="/categories/人生感悟/">人生感悟</a></li>
                        <li><a href="/categories/">归档</a></li>
                        <li><a href="/tags/">分类</a></li>
                        <li><a href="/about/">关于我</a></li>
                        <li>
                            <form method="get" style="padding: 8px" action="https://www.google.com/search" target="_blank">
                                <input type="hidden" name="sitesearch" value="https://kingjcy.github.io/"/>
                                <input type="text" class="form-control" name="q" placeholder="Press enter to search">
                            </form>
                        </li>
                    </ul>

                </div>
            </div>
        </nav>
    </header>


<div class="posts">
    
    
<article class="post li">
    <header>
        <div class="post-date">
            2021年01月17日
        </div>
        <h2 class="post-title">
            <a href="/post/cloud/paas/base/kubernetes/k8s-network-cni/">云计算K8s系列---- 网络CNI</a>
        </h2>
    </header>
    <div class="post-content">
        <p>CNI（Container Network Interface）是 CNCF 旗下的一个项目，最早是由CoreOS发起的容器网络规范，由一组用于配置 Linux 容器的网络接口的规范和库组成，同时还包含了一些插件。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2020年10月14日
        </div>
        <h2 class="post-title">
            <a href="/post/cloud/paas/base/docker/docker-network/">云计算容器系列---- Docker network</a>
        </h2>
    </header>
    <div class="post-content">
        <p>容器网络的建立和控制是一种结合了network namespace、iptables、linux网桥、route table等多种Linux内核技术的综合方案,在宿主机和容器内分别创建虚拟接口，并让它们彼此连通。</p>

<ul>
<li>network namespace：主要提供了关于网络资源的隔离，包括网络设备、IPv4和IPv6协议栈、IP路由表、防火墙、/proc/net目录、/sys/class/net目录、端口（socket）等。</li>
<li>linux Bridge：功能相当于物理交换机，为连在其上的设备（容器）转发数据帧。如docker0网桥。</li>
<li>iptables：主要为容器提供NAT以及容器网络安全。</li>
<li>veth pair：两个虚拟网卡组成的数据通道。在Docker中，用于连接Docker容器和Linux Bridge。一端在容器中作为eth0网卡，另一端在Linux Bridge中作为网桥的一个端口。</li>
</ul>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2020年10月13日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/http/">计算机网络系列（八）---- Http</a>
        </h2>
    </header>
    <div class="post-content">
        当今web程序的开发技术真是百家争鸣，ASP.NET, PHP, JSP，Perl, AJAX 等等。 无论Web技术在未来如何发展，理解Web程序之间通信的基本协议相当重要， 因为它让我们理解了Web应用程序的内部工作原理。其中http是网络的最基本协议，也是我们下面重点了解的协议之一。
基本概念 各种协议 尽管我们会单独讲解其他协议，比如tcp/ip，但是讲解http肯定是离不开这些协议的。
tcp/ip数据传输方式
利用tcp/ip协议族通讯时，通过分层顺序通讯。
1、发送端从应用层往下走，接收端从应用层往上走 2、发送端每经过一层都会被打上该层所属的首部信息，接收端每经过一层将把首部去掉  http在应用层决定了向用户提供应用服务时通讯的活动 应用层包括：FTP，DNS，HTTP等
各种协议的关系
1、DNS协议是应用层协议作用是提供域名到ip地址之间的解析服务
2、TCP协议位于传输层 作用是提供可靠的字节流服务
字节流服务：将大块数据分割成以报文段为单位的数据包 可靠：采用三次握手策略  3、ip位于网络层作用是把各种数据包传送给对方
确保传送正确的两个条件
IP地址：指明了节点被分配到的地址。可变。 MAC地址：网卡所属的固定地址。不可变。  4、http协议和tcp协议的区别与联系
区别
所属协议层不同：tcp属于传输层，http属于应用层 职责不同：tcp解决数据传输问题，http解决数据包装问题  联系
http协议是构建在tcp协议之上的 打个比方：ip是高速公路，tcp是跑在高速公路上的卡车，http是卡车里面的包裹  5、URL与URI
URL：统一资源定位符，资源的地址。是URI的子集 URI：统一资源标识符，用字符串标识某一互联网资源  URI的格式
web web理念：文档之间相关关联，连成可相互参阅的万维网（www）
web互连（通讯）的基础：tcp/ip协议族，http属于它内部的子集
web（www）的三项构建技术：
html：页面使用什么语言展示 URL：页面在什么位置 http：文档之间传递的协议是什么  Web服务器，浏览器，代理服务器 当我们打开浏览器，在地址栏中输入URL，然后我们就看到了网页。 原理是怎样的呢？
实际上我们输入URL后，我们的浏览器给Web服务器发送了一个Request, Web服务器接到Request后进行处理，生成相应的Response，然后发送给浏览器， 浏览器解析Response中的HTML,这样我们就看到了网页，过程如下图所示
client&lt;----------&gt;server  我们的Request 有可能是经过了代理服务器，最后才到达Web服务器的。 client&lt;----------&gt;proxy&lt;-----------&gt;server  代理服务器就是网络信息的中转站，有什么功能呢？
 提高访问速度， 大多数的代理服务器都有缓存功能。 突破限制， 也就是翻墙了 隐藏身份。  http 什么是HTTP协议 超文本传输协议(HTTP)是一种通信协议，是指计算机通信网络中两台计算机之间进行通信所必须共同遵守的规定或规则，它允许将超文本标记语言(HTML)文档从Web服务器传送到客户端的浏览器
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2020年04月10日
        </div>
        <h2 class="post-title">
            <a href="/post/cloud/paas/base/kubernetes/k8s-network/">云计算K8s组件系列（九）---- 网络</a>
        </h2>
    </header>
    <div class="post-content">
        <p>Kubernetes中有三种网络和三种IP。</p>

<p><img src="/media/cloud/k8s/network" alt="" /></p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2018年09月29日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/tc/">计算机网络系列（十七）---- tc</a>
        </h2>
    </header>
    <div class="post-content">
        <p>流量控制（Traffic Control， tc）是Linux内核提供的流量限速、整形和策略控制机制。它以qdisc-class-filter的树形结构来实现对流量的分层控制。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2018年09月29日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/route/">计算机网络系列（十六）---- route</a>
        </h2>
    </header>
    <div class="post-content">
        <p>路由是网络中传输数据的路线，不同的路由实现了网络之间不同单位的通信。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2018年02月19日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/rpc/rpc/">计算机网络系列（十三）---- rpc</a>
        </h2>
    </header>
    <div class="post-content">
        <p>RPC(Remote Procedure Call)是指远程过程调用，也就是说两台服务器A，B，一个应用部署在A服务器上，想要调用B服务器上应用提供的函数/方法，由于不在一个内存空间，不能直接调用，需要通过网络来表达调用的语义和传达调用的数据。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2016年05月01日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/webserver/">计算机网络系列（十五）---- webserver</a>
        </h2>
    </header>
    <div class="post-content">
        <p>webserver的主要实现方案。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2016年03月01日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/websocket/">计算机网络系列（六）---- websocket</a>
        </h2>
    </header>
    <div class="post-content">
        <p>WebSocket不是HTTP协议，是基于http协议，HTTP只负责建立WebSocket连接，WebSocket连接相对于http 来说是一个长连接，解决了只能被动响应的问题。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2016年01月21日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/udp/">计算机网络系列（四）---- udp</a>
        </h2>
    </header>
    <div class="post-content">
        <p>UDP是User Datagram Protocol的简称，中文名是用户数据报协议，是OSI参考模型中的传输层协议，它是一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2016年01月11日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/ssl/">计算机网络系列（十一）---- tls/ssl</a>
        </h2>
    </header>
    <div class="post-content">
        <p>SSL：（Secure Socket Layer，安全套接字层）/TLS(Transport Layer Security) 传输层安全性协议，为Netscape所研发，用以保障在Internet上数据传输之安全，利用数据加密(Encryption)技术，可确保数据在网络上之传输过程中不会被截取。当前版本为3.0。它已被广泛地用于Web浏览器与服务器之间的身份认证和加密数据传输。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2016年01月01日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/rest/">计算机网络系列（九）---- rest</a>
        </h2>
    </header>
    <div class="post-content">
        <p>经常搞不清楚我们常说的HTTP API和Restful API是什么关系，HTTP API是Restful API的实现和表现，Restful API是HTTP API的基础，提供了标准接口和规范。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年12月29日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/port/">计算机网络系列（十二）---- port</a>
        </h2>
    </header>
    <div class="post-content">
        <p>端口也是我们通信识别的关键信息，掌握好各个端口的使用方式对我们编程很关键。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年12月23日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/icmp/">计算机网络系列（二）---- icmp</a>
        </h2>
    </header>
    <div class="post-content">
        ICMP全名为(INTERNET CONTROL MESSAGE PROTOCOL)网络控制消息协议，属于TCP/IP协议族，工作在网络层（第三层），用于在IP主机、路由器之间传递控制消息，主要用于主机探测,路由维护,路由选择,流量控制。
基本概念 IP协议并不是一个可靠的协议，它不保证数据被送达，那么，自然的，保证数据送达的工作应该由其他的模块来完成，其中一个重要的模块就是ICMP(网络控制报文)协议。
当传送IP数据包发生错误－－比如主机不可达，路由不可达等等，ICMP协议将会把错误信息封包，然后传送回给主机。给主机一个处理错误的机会，这 也就是为什么说建立在IP层以上的协议是可能做到安全的原因。ICMP数据包由8bit的错误类型和8bit的代码和16bit的校验和组成，而前16bit就组成了ICMP所要传递的信息。
ICMP报文包含在IP数据报中，IP报头在ICMP报文的最前面。一个ICMP报文包括IP报头（至少20字节）、ICMP报头（至少八字节）和ICMP报文（属于ICMP报文的数据部分）。当IP报头中的协议字段值为1时，就说明这是一个ICMP报文。ICMP报头如下图所示。
 类型： 占一字节，标识ICMP报文的类型，目前已定义了14种，从类型值来看ICMP报文可以分为两大类。第一类是取值为1~127的差错报文，第2类是取值128以上的信息报文。  代码： 占一字节，标识对应ICMP报文的代码。它与类型字段一起共同标识了ICMP报文的详细类型。 校验和： 这是对包括ICMP报文数据部分在内的整个ICMP数据报的校验和，以检验报文在传输过程中是否出现了差错。其计算方法与在我们介绍IP报头中的校验和计算方法是一样的。 标识： 占两字节，用于标识本ICMP进程，但仅适用于回显请求和应答ICMP报文，对于目标不可达ICMP报文和超时ICMP报文等，该字段的值为0。  ICMP协议大致分为两类，一种是查询报文，一种是差错报文。其中查询报文有以下几种用途:
1、ping查询 2、子网掩码查询（用于无盘工作站在初始化自身的时候初始化子网掩码） 3、时间戳查询（可以用来同步时间）  尽管在大多数情况下，错误的包传送应该给出ICMP报文，但是在特殊情况下，是不产生ICMP错误报文的。如下
1、ICMP差错报文不会产生ICMP差错报文（出IMCP查询报文）（防止IMCP的无限产生和传送） 2、目的地址是广播地址或多播地址的IP数据报。 3、作为链路层广播的数据报。 4、不是IP分片的第一片。 5、源地址不是单个主机的数据报。这就是说，源地址不能为零地址、环回地址、广播地 址或多播地址。  虽然里面的一些规定现在还不是很明白，但是所有的这一切规定，都是为了防止产生ICMP报文的无限传播而定义的。
基本应用 ping ICMP的一个典型应用是Ping。Ping是检测网络连通性的常用工具，同时也能够收集其他相关信息。用户可以在Ping命令中指定不同参数，如ICMP报文长度、发送的ICMP报文个数、等待回复响应的超时时间等，设备根据配置的参数来构造并发送ICMP报文，进行Ping测试。
ping程序是用来探测主机到主机之间是否可通信，如果不能ping到某台主机，表明不能和这台主机建立连接。ping 使用的是ICMP协议，它发送icmp回送请求消息给目的主机。ICMP协议规定：目的主机必须返回ICMP回送应答消息给源主机。如果源主机在一定时间内收到应答，则认为主机可达。
Ping工作过程
1、ping命令执行的时候，源主机首先会构建一个ICMP请求数据包，ICMP数据包内包含多个字段。最重要的是两个，第一个是类型字段，对于请求数据包而言该字段为8；另外一个是顺序号，主要用于区分连续ping的时候发出的多个数据包。每发出一个请求数据包，顺序号就会自动加1.为了能够计算往返时间RTT，它会在报文的数据部分插入发送时间。
2、然后，由ICMP协议将这个数据包连同地址192.168.1.2一起交给IP层，IP层将以192.168.1.2作为目的地址，本机IP地址作为源地址，加上一些其它控制信息，构建一个IP数据包。
3、接下来，需要加入MAC头。如果在本机ARP映射表中找出IP地址192.168.1.2所对应的MAC地址，则可以直接使用；如果没有，则需要发送ARP协议查询MAC地址，获得MAC地址后，由数据链路层构建一个数据帧，目的地址是IP层传过来的MAC地址，源地址则是本机的MAC地址；还要附加上一些控制信息，依据以太网的介质访问规则，将他们传送出去。
4、主机B收到这个数据帧后，先检查它的目的MAC地址，并和本机的MAC地址对比，如果符合则接收，否则就丢弃。接收后检查该数据帧，将IP数据包从帧中提取出来，交给本机的IP层。同样IP层检查后，将有用的信息提取后交给ICMP协议。
5、主机B会构建一个ICMP应答包，应答数据包的类型字段为0，顺序号为接收到的请求数据包中的顺序号，然后再发送出去给主机A。
6、在规定的时间内，源主机如果没有接到ICMP的应答包，则说明目标主机不可达，如果接收到了ICMP应答包，则说明目标主机可达。
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年12月12日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/dns/">计算机网络系列（七）---- dns</a>
        </h2>
    </header>
    <div class="post-content">
        <p>DNS就是域名系统，是因特网中的一项核心服务，是用于实现域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过主机名，得到该主机名对应的IP地址的过程叫做域名解析（或主机名解析）。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年11月23日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/connect/">计算机网络系列（十四）---- connect</a>
        </h2>
    </header>
    <div class="post-content">
        <p>连接实际上是操作系统内核的一种数据结构，称为TCP控制块（TCB），对于linux而言是tcp_sock结构。不光连接，连数据包也是由一个数据结构来控制，linux里面称为sk_buff结构。完成三次握手就是连接，完成四次握手就是连接关闭。握手其实就是服务端和客户端都获取解析对方数据的方式（四元组是指source ip,source port,target ip,target port），放到对应的位置。这样两者就能一对一处理了，数据其实还是通过网卡传输的，但我只处理我认识的数据。这样比较好理解。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年10月23日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/https/">计算机网络系列（十）---- https</a>
        </h2>
    </header>
    <div class="post-content">
        <p>HTTPS实际上就是HTTP穿上了SSL/TLS的外套，我们都知道HTTP属于应用层的协议，是离程序员比较近的，而SSL（安全套接字）与TLS（运输层安全）都属于运输层协议。其实SSL与TLS都是上个世纪的产物，最新版本的TLS建立在SSL 3.0协议规范之上。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年09月29日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/tcp/">计算机网络系列（三）---- tcp</a>
        </h2>
    </header>
    <div class="post-content">
        <p>传输控制协议（TCP，Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年09月19日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/ip/">计算机网络系列（一）---- Ip</a>
        </h2>
    </header>
    <div class="post-content">
        <p>IP（Internet Protocol , 互联网协议）主要用于互联网通信。IP协议用于将多个包交换网络连接起来，负责第三层网络层的通信（再往下就是二层链路层mac地址的通信），他是在源地址和目的地址之间传输数据报，还提供对数据大小的重新组装功能，以适应不同网络的要求。</p>
    </div>
    </article>
<hr>

    
    
<article class="post li">
    <header>
        <div class="post-date">
            2015年06月06日
        </div>
        <h2 class="post-title">
            <a href="/post/computerbase/network/socket/">计算机网络系列（五）---- socket</a>
        </h2>
    </header>
    <div class="post-content">
        <p>我们在tcp/ip中提到，ip提供了地址，tcp封装了接口，最后构建socket编程接口，所以Socket 就是编程接口（API），是对 TCP/IP 的封装，对外提供的接口，屏蔽了各个协议的通信细节，使得程序员无需关注协议本身，直接使用socket提供的接口来进行互联的不同主机间的进程的通信。</p>
    </div>
    </article>
<hr>

    
</div>

</div>
<hr>

<footer class="container copy">
    <p>&copy; 2021  kingjcy blog </p>
	<p>Powered by <a href="https://gohugo.io" target="_blank">Hugo</a></p>
</footer>

<script>hljs.initHighlightingOnLoad();</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ace3ec99de96c4080ead1eb8d52db3b3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92600390-2', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>

